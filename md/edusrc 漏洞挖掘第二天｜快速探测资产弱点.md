> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Ws4xdiEwSsBaCDim67kghg)

![](https://mmbiz.qpic.cn/mmbiz_gif/Ljib4So7yuWhqia83B2feAGySST8jkguLC15V0vYO2AsR7XayGLVnKlfQwEd4bu9pKdjxcYLnXx1zwk9jSM5Uwfg/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)  

_**文章作者：辛巴大佬**_

没看过 edusrc 漏洞挖掘第一天的，访问以下链接查看：

《[edusrc 漏洞挖掘第一天](http://mp.weixin.qq.com/s?__biz=MzIxNDQxMzYzMA==&mid=2247486136&idx=1&sn=2d659eb66f560a818d16f51620a343b0&chksm=97a6b2e9a0d13bfff874010657aff907826ee8466c976922d595e7ad740f6fa6a35c0da9638a&scene=21#wechat_redirect)》

今天，是我们漏洞挖掘的第二天，我们还是选择 edusrc 里面漏洞排名第一的上海交通大学进行漏洞挖掘。

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQvFmsMJuebQSbRDrpyqdfFM83zv5F5ezkOTnfqJYeFT412XUCoU1VkYw/640?wx_fmt=jpeg)

  
还是使用第一天收集的子域名列表，老演员了属于是。  
  

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQv39ceFpllceEaaguLicGEx4PskRKiczTycV5K9faBNiawVBjbNLhia0CfOQ/640?wx_fmt=jpeg)

突然想起就昨天公众号文章，后台私信的问题，想先给大家聊聊。  

在第一天的漏洞挖掘文章中，我听取了很多人的观看意见，也有朋友告诉我，说看到一顿操作以后，发现是弱口令，让他有点失落，加上刚刚上公众号，有个读者私信我，说我发的什么玩意儿，能不能发点有技术含量的，然后我准备私信他，结果发现被取关了。  

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQv9ic56cV5m1PDSQLnTbZQBOgMZOuH0gIfW534eGn4YZD8ZK1JDvRm5KQ/640?wx_fmt=jpeg)

**心里还是有点失落的，其实也是我没有在第一天做什么说明的原因。**  

以往我们搞漏洞挖掘喜欢长篇描写，这次，我们觉得应该搞点不一样的，从漏洞挖掘第一天开始，用实际案例告诉大家怎么去挖掘漏洞，在每篇短小精悍的文章中，让大家认识一个又一个漏洞是怎么被找到的，包括技巧和方法，我们将会以快速、简洁、高效的文章特点，给大家分段式的讲高效漏洞挖掘技巧。

我想告诉大家的是，漏洞挖掘绝对是一个依靠技巧和扎实理论来进行的东西，在无数人挖掘了两千多个上海交通大学漏洞的情况下，我们还能依靠如此简单的技巧获取到这个漏洞，这不是正说明了我们的观察还需要仔细吗？  
在漏洞挖掘中，我们需要的是耐心和结果，弱口令是漏洞，它不是无用的，希望大家用漏洞挖掘的思维来看待，在你们没有看到详情的漏洞报告中，还有很多弱口令，仔细和尝试才是挖掘的法宝。  
还有论坛评论下和微信好友的朋友，问我如何收集子域名的？这个问题，我们会在后面的每个文章里面都教大家一个技巧。  
今天我就给大家讲讲适合新手的一个子域名收集方法：利用 securitytrails 进行快速域名收集。

  
**网站地址：**

```
https://securitytrails.com/
```

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQv5jqaWGXlK7NIAfyIZzibLLzEZWa4l8F2Jnicqdr8ibEEXIyRAC68n8SsQ/640?wx_fmt=jpeg)

  
注册以后即可进行查询，很多工具也是集成它的 api 接口进行调用进行查询。  
可以看到，共查询到 2509 条子域名记录。  
我们通过 python 脚本，导出域名结果, 需要在脚本中自己添加 apikey。

项目地址：  

```
https://github.com/chaitanyakrishna/subdomain-enum
```

  
我生成了 csv 格式文件，自动保存在当前目录。  

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQvbIELcuxBeWOX0PvdgbRANd3xJZpklo7Srm2ibJbSibgTfP8YzBxlxkQA/640?wx_fmt=jpeg)

继续拿出我们的 httpx，首先我们昨天已经讲过了，httpx 可以快速探测网站状态，使用 httpx 快速探测这两千多网站的存活状态就行，然后把存活资产保存下来就行了。  
鉴于上交网站资产丰富，单单从发现存活的网站地址，就已经超过 1000 个了，还没有算端口扫描后的资产信息，所以面对这么大的资产信息，很有可能出现 api 接口信息泄露的问题。  
所以，我使用 httpx 的 -path 参数指定了一个可能会出现 api 信息泄露的路径：api/users，通过 httpx 快速探测存活上千个子域名，在看返回的标题信息来判断漏洞是否存在。  
  
面对复杂的资产，我们可以通过这种方法来进行一些漏洞的快速发现，同理，同样的方法，也可以用来批量探测后台，git/svn 以及备份文件等，在 httpx 后面，我们使用了 - mc 200，来指定只返回响应为 200 的探测结果。  

**以下图片为 api/users 的探测结果**

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQv0MXPrbhXmmfA4clSDCeLw033r0gIKe4hvKJ1zJC8gMNsfCvUEK7aqA/640?wx_fmt=jpeg)

**当然，上面说的，后台批量探测的实现，也是一样的，例如，我们指定 admin 为探测路径，我们都知道，admin 是后台路径，如果只是 admin 目录，一般都会跳转一次到登录界面文件，比如 admin/login.php 等等，我们指定状态码为 301,302，查看探测结果，其他的探测，靠大家自己发挥了。**

如图：

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQvBEzuRiaMicjl6VP9IVbUBP2reCcK5ZSB1rEhxqX4UkZMVszG9eUl4hog/640?wx_fmt=jpeg)

**好了，言归正传，最后在 api/user 的探测结果下面，发现一个标题为 api 的链接，点击以后发现爆出管理员账号密码信息。**

![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQvS2LwCZGrlVs8AVoXg4NK0H0Nia0iavdicvp6D7bYWZBZuXDR5iax2RDwIQ/640?wx_fmt=jpeg)

  
给了三分  
  
  
![](https://mmbiz.qpic.cn/mmbiz_jpg/zVZUsCzNKWGMiaEoxQfsPiaaxqiaaHANkQv1y2R7PMLnI8GNick2DND2UbxJvVNMoCK0s6BQtWPbXp30T4kqicLUjQA/640?wx_fmt=jpeg)