> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/q3cq5ZUnYzBNmCjN3B1TsQ)

牙叔教程 简单易懂

先说结论: 不冲会员, 也可以达到 5MB/S.

是 MB 大写 B 哦, B 字节,

不是小 b, 比特;

这是百度网盘官方提供的方法, 只是一般人不知道,

速度限制：实测非会员下载 5MB/s

现在我来跟你讲讲使用步骤.

第一步 打开网盘控制台
-----------

https://pan.baidu.com/union/console/applist?from=person

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQA44fSfICPicu7gAj5T5UdGQzpBXKacwrIVyF7t8H2dBMgVEofOAMqSvA/640?wx_fmt=png)

第二步 点击创建应用
----------

网页右上角

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAr9718tIeREMMx1KpfpVfVfRut3JLr8ctunWhWy0mnn7HoBsFPFv6lw/640?wx_fmt=png)

第三步 填写资料
--------

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAQjYhNqO0upXQLBs2UwcsvpNcusG8rsg2kwkW6Uwiac3DibcNb2ReSMMA/640?wx_fmt=png)

名字随便填

点击创建

第四步 创建失败
--------

去认证一下

https://pan.baidu.com/union/apply?

第五步 创建成功
--------

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQArkSicomOFOJJB1OAHic5nbYoPmtENeBUGdc3qX2VK0HCicTg0Sc2YAPpA/640?wx_fmt=png)

第六步 看文档
-------

https://pan.baidu.com/union/doc/

第七步 选择授权模式
----------

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAIP79jZl9EadLC8buGnx5QiazBiaJyKIOGcHiaANVib7N8RyhH5poHfeGGg/640?wx_fmt=png)

前两个都要填写域名, 最后一个不用填写域名, 所以我选择

设备码模式

第八步 获取二维码
---------

```
const axios = require('axios');
const { AppID, Appkey, Secretkey, Signkey } = require("./config.js");
axios.get('https://openapi.baidu.com/oauth/2.0/device/code', {
  params: {
    response_type: 'device_code',
    client_id: Appkey,
    scope: 'basic,netdisk'
  },
  headers: {
    'User-Agent': 'pan.baidu.com'
  }
})
  .then(response => {
    console.log(response.data);
  })
  .catch(error => {
    console.log(error);
  });
  // {
  //   device_code: 'e85exxxxxxxxxxx38b',
  //   user_code: '6xxxxxxxxk',
  //   verification_url: 'https://openapi.baidu.com/device',
  //   qrcode_url: 'https://openapi.baidu.com/device/qrcode/2d0382exxxxxxxxxx93e1/6xxxxxxck',
  //   expires_in: 300,
  //   interval: 5
  // }

```

获取到 qrcode_url 以后, 复制该链接到浏览器, 然后就会出现二维码, 用你的手机扫码二维码授权

第九步 获取 Access Token
-------------------

```
const axios = require('axios');
const { AppID, Appkey, Secretkey, Signkey } = require("./config.js");
axios.get('https://openapi.baidu.com/oauth/2.0/token', {
  params: {
    grant_type: 'device_token',
    code: 'e8xxxxxxxxxxxxxxxxxx38b',
    client_id: Appkey,
    client_secret: Secretkey
  },
  headers: {
    'User-Agent': 'pan.baidu.com'
  }
})
  .then(response => {
    console.log(response.data);
  })
  .catch(error => {
    console.log(error);
  });
  // {
  //   expires_in: 2592000,
  //   refresh_token: '12xxxxxxxxxxxxxxxxxXw',
  //   access_token: '126xxxxxxxxxxxxxxxxJNeg',
  //   session_secret: '',
  //   session_key: '',
  //   scope: 'basic netdisk'
  // }

```

第十步 看下载文档
---------

https://pan.baidu.com/union/doc/pkuo3snyp

第十一步 获取文件列表
-----------

```
async function getFileList() {
  try {
    const response = await axios.get("https://pan.baidu.com/rest/2.0/xpan/file", {
      params: {
        method: "list",
        dir: "/test",
        order: "time",
        start: 0,
        limit: 10,
        folder: 0,
        access_token: access_token,
        desc: 1,
      },
      headers: {
        "User-Agent": "pan.baidu.com",
      },
    });
    console.log(response.data);
  } catch (error) {
    console.log(error);
  }
}

```

我再目录 test 传了一个 46.53MB 的文件用于测试

返回的文件列表信息

```
{
  errno: 0,
  guid_info: '',
  list: [
    {
      tkbind_id: 0,
      owner_type: 0,
      category: 6,
      real_category: 'rar',
      fs_id: 1011xxxxxxxx288,
      md5: '5eeabxxxxxxxxxxx82183',
      oper_id: 231xxxxxxxxx846,
      server_ctime: 168xxxxxxxx05,
      extent_tinyint7: 0,
      wpfile: 0,
      local_mtime: 16xxxxxxxxx4658,
      size: 4xxxxxxxxx390,
      from_type: 0,
      pl: 1,
      share: 0,
      server_atime: 0,
      path: '/test/psxxxxxxxx.rar',
      local_ctime: 166xxxxxx79,
      server_mtime: 168xxxxxxxx05,
      server_filename: 'psxxxxxxx.rar',
      owner_id: 0,
      unlist: 0,
      isdir: 0
    }
  ],
  request_id: 87xxxxxxxxxxxxx00,
  guid: 0
}

```

第十二步 获取文件信息
-----------

```
async function getFileMetas() {
  try {
    const response = await axios.get("http://pan.baidu.com/rest/2.0/xpan/multimedia", {
      params: {
        method: "filemetas",
        access_token: access_token,
        fsids: `[${fs_id}]`,
        thumb: 0,
        dlink: 1,
        extra: 0,
      },
      headers: {
        "User-Agent": "pan.baidu.com",
      },
    });
    console.log(response.data);
  } catch (error) {
    console.log(error);
  }
  // {
  //   errmsg: 'succ',
  //   errno: 0,
  //   list: [
  //     {
  //       category: 6,
  //       dlink: 'https://d.pcs.baidu.com/file/5eexxxxxxxx183?fid=231xxxx',
  //       filename: 'pxxxxxx.rar',
  //       fs_id: 101xxxxxxxxxxxx1288,
  //       isdir: 0,
  //       local_ctime: 1xxxxxxxxxx579,
  //       local_mtime: 16xxxxxxxxx658,
  //       md5: '5eeabb4exxxxxxx2183',
  //       oper_id: 23xxxxxxxxxxx6846,
  //       path: '/test/xxxxxx.rar',
  //       server_ctime: 16xxxxxxx705,
  //       server_mtime: 16xxxxxxxxx3705,
  //       size: 48790390
  //     }
  //   ],
  //   names: {},
  //   request_id: '87xxxxxxxxxx651'
  // }
}

```

第十三步 下载文件
---------

不允许使用浏览器直接下载超过 50MB 的文件， 超过 50MB 的文件需用开发者原生的软件或者 app 进行下载

我的文件刚好没有 50MB, 我去整个 100M 的试试

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQANG7FBpcTNoC8cVKI6nzcOtPDANe6Vm2Sp7zF8YhOpJQjxFasxhoaFA/640?wx_fmt=png)

上传了一个 93MB 的文件, 看看能不能正常下载

```
function downloadFile() {
  let dlink =
    "https://d.pcs.baidu.com/file/5exxxxxxxxxx"
  let url = `${dlink}&access_token=${access_token}`;
  return new Promise((resolve, reject) => {
    axios
      .get(url, {
        headers: {
          "User-Agent": "pan.baidu.com",
          Host: "d.pcs.baidu.com",
        },
        responseType: "stream",
      })
      .then((response) => {
        const writeStream = fs.createWriteStream("file.zip");
        response.data.pipe(writeStream);
        writeStream.on("finish", () => {
          resolve(true);
        });
        writeStream.on("error", (error) => {
          reject(error);
        });
      })
      .catch((error) => {
        console.log(error);
        reject(false);
      });
  });
}

```

你们知道下载时间多少吗?

```
async function main() {
  let startTime = new Date().getTime();
  let downloadRes = await downloadFile();
  console.log(downloadRes);
  let endTime = new Date().getTime();
  console.log(`下载耗时：${(endTime - startTime) / 1000}s`);
}
main();

```

下载 100M 文件的时间  

```
下载耗时：17.833s // 93.06MB

```

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQA6rwAPUNhSsh8NFSpuu4crBxy49ribuMkt43Esu811zF7WtKdvS731GA/640?wx_fmt=png)

Y 的不比阿里慢呀

备注
--

目前下载 sdk 仅支持小文件下载，如果涉及大文件，可参考该 demo 进行升级改造，涉及到分片下载、断点下载等技术

以上代码均由 [ChatGPT4](https://mp.weixin.qq.com/s?__biz=MzAxNTY0NjY0OA==&mid=2456550165&idx=1&sn=dc492d38968b64ada4a3eb7f11161845&scene=21#wechat_redirect) 生成, 我用的是国内的服务商提供的 [chatGPT4](https://mp.weixin.qq.com/s?__biz=MzAxNTY0NjY0OA==&mid=2456550165&idx=1&sn=dc492d38968b64ada4a3eb7f11161845&scene=21#wechat_redirect) 服务, 不需要科技就可以正常用, 还支持画图

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAk5ayiavtTvuSFibDFAk8ibicXtqq6WbGBhQTKGMrLqhy7rCrI4mpQAJAjw/640?wx_fmt=png)

公众号 牙叔教程
--------

[这个 ChatGPT 星球有多牛逼](https://mp.weixin.qq.com/s?__biz=MzAxNTY0NjY0OA==&mid=2456550165&idx=1&sn=dc492d38968b64ada4a3eb7f11161845&scene=21#wechat_redirect)

微信公众号 牙叔教程
==========

![](https://mmbiz.qpic.cn/mmbiz_jpg/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAWtl6IGrBXickz1bVrp0OBuHFDc0ky5fUcicRhiapTIkJYGrxJbyM7E8Fw/640?wx_fmt=jpeg)

QQ 群
====

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQA7O6XB64HpzNNv6vcHkHboFM3uzTxHNeUd672ibBpKm26k1ibVSibVOO4A/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/n3RS3ib3lbzibia6yt8X9L2tbWqQXksXnQAYdfdiaL0lEyDFMOoyzAX7Y8PozH8lvQry62TYBq5HmSBEHl81jiantXg/640?wx_fmt=png)