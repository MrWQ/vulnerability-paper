> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Tg2i6rAwi0yX0QUkqGrEGQ)

Microsoft Exchange Server 是个消息与协作系统。Exchange server 可以被用来构架应用于企业、学校的邮件系统或免费邮件系统。它还是一个协作平台，用户可以在此基础上开发工作流，知识管理系统，Web 系统或者是其他消息系统。Exchange server 是一个主流的 Internet 协作应用服务器，适合有各种协作需求的用户使用。

**邮件服务器角色**

Exchange Server 2010 包含五个服务器角色，而在 Exchange Server 2013 精简到了三个服务器角色，在 Exchange Server 2016 和 Exchange Server 2019 中只有两个服务器角色：

![](https://mmbiz.qpic.cn/sz_mmbiz_png/XShQMCwLIrDNzGMxmSn78eTP9422FkHLXwjaO0KiavjcONjAH181SiaMWXrQyP6nsvW2egzmA0ouSqTtjMzFaSjw/640?wx_fmt=png)

**邮箱服务器 (Mailbox Server)：**

提供托管邮箱，公共文件夹等服务，是必选的服务器角色。

**客户端访问服务器 (Client Access Server)：**

用来接收并处理不同客户端的请求，并提供各种接口给客户以访问 Exchange 服务。

**集线传输服务器 (Hub Transport Server)：**

核心服务是 Microsoft Exchange Transport，用于处理大多数邮件的路由、策略等以及 Mail Flow。起到邮件传输中继的作用。

**统一消息服务器：**

Unified Messaging Server，用于允许邮箱用户可以在邮件中发送存储语音消息和传真消息，可选角色。

**边缘传输服务器：**

Edge Transport Server，通常部署于网络边界。其接受来自内部组织的邮件和来自外部可信服务器的邮件，然后应用特定的反垃圾邮件、反病毒策略，最后将通过策略筛选的邮件路由到内部的集线传输服务器，可选角色。

**Exchange Server 2013 角色邮箱服务器：**

负责认证、重定向、代理来自外部不同客户端的访问请求，主要包含客户端访问服务（Client Access Service）和前端传输服务（Front End Transport Service）两大组件。

**客户端访问服务器：** 

托管邮箱、公共文件夹等数据，主要包含集线传输服务（Hub Transport Service）和邮箱传输服务（Mail Transport Service）两大组件服务。

**边缘传输服务器：** 

负责路由出站与入站邮件、策略应用等。

**邮箱服务器：**

![](https://mmbiz.qpic.cn/sz_mmbiz_png/XShQMCwLIrDNzGMxmSn78eTP9422FkHLtrLgnj8MV1EpzX9iaNQoNiccy09BNM8jRxKar5vWKq5egc29XowicvugA/640?wx_fmt=png)

**边缘传输服务器：**

边缘传输服务器处理 Exchange 组织的所有外部邮件流。边缘传输服务器通常安装在外围网络中，并订阅到内部 Exchange 组织。当 Exchange 组织接收和发送邮件时，EdgeSync 同步进程向边缘传输服务器提供收件人信息和其他配置信息。当 Exchange 组织接收和发送邮件时，边缘传输服务器提供反垃圾邮件规则和邮件流规则。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/XShQMCwLIrDNzGMxmSn78eTP9422FkHLicB3S41pGZtLku77t0g845sV3bmHsrgE26e2Ftk2X8zp6usMEvgvLQw/640?wx_fmt=png)

**客户端 / 远程访问接口和协议**

Exchange Server 提供了多种客户端和远程访问接口及协议，以便用户和管理员能够方便访问和使用 Exchange 服务。

**autodiscover：**

Exchange Server 2007 推出的一项自动服务，用于自动配置用户在 outlook 中邮箱的相关设置，简化用户登录使用邮箱的流程。

**ecp (Exchange Control Panel)：**

Exchange Administrative Center(EAC)，即 Exchange 管理中心，管理员用于管理组织中的 Exchange 的 Web 控制台。

**ews (Exchange Web Service)：**

提供一套 API 编程接口，用于操作 Exchange 相关功能，于 Exchange Server 2007 被提出，实现客户端与服务端之间基于 HTTP 的 SOAP 交互。

**mapi (MAPI-over-HTTP)：**

Outlook 连接 Exchange 的默认方式，在 2013 和 2013 之后版本开始使用。

**Microsoft-Server-ActiveSync：**

该协议基于 HTTP 和 XML，允许手机访问 Exchange 服务器上的组织信息。

**OAB (Office Address Book)：**

用于为 Outlook 客户端提供地址簿，减轻 Exchange 的负担。

**owa (Outlook Web App)：**

Exchange owa 接口，用于通过 web 应用程序访问邮件。

**powershell：**

用于服务器管理的 Exchange 管理控制台。

**Rpc：**

早期的 Outlook 还使用称为 Outlook Anywhere 的 RPC 交互。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/MVPvEL7Qg0HFkDfIP74eLxiciacIxWiaz6LbwPOwK0Wbzwmicia1sQcCqFHGWib4Dx5gDqg1iav4AlTfCaNiaSWlCNuV2w/640?wx_fmt=png)

本篇集权科普文章，网星安全从邮件服务器角色，客户端 / 远程访问接口和协议 2 个维度分析了 Exchange server。下一期，我们将为大家介绍 Exchange 的攻击面。