> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/pl7NXqZPYD8P7dTFQ3LgiA)

> **æ¥è‡ªå…¬ä¼—å·ï¼šå¿«å­¦Python**

äººç”Ÿè‹¦çŸ­ï¼Œå¿«å­¦Pythonï¼

åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å¤šæ¬¡å°è¯•ç”¨Pythonå®ç°æ–‡æœ¬OCRè¯†åˆ«ï¼

ç‚¹å‡»è“å­—æŸ¥çœ‹å†å²æ–‡ç« ğŸ‘‰[OCRè¯†åˆ«çš„èŠ±æ ·ä½¿ç”¨](https://mp.weixin.qq.com/s?__biz=MzI2MDY2NzQwMQ==&mid=2247490907&idx=2&sn=30dc1894b8314c89ab7d510fa49154dc&chksm=ea677c3ddd10f52b139fb403c6a91d62d39cfcc16896d27a29d5d92de8d7419b02a75d5037ac&token=421314186&lang=zh_CN&scene=21#wechat_redirect)ã€[5è¡ŒPythonå®ç°éªŒè¯ç è¯†åˆ«](https://mp.weixin.qq.com/s?__biz=MzI2MDY2NzQwMQ==&mid=2247492627&idx=1&sn=014a6ca8037a6891add03fa5c8833a80&chksm=ea648575dd130c63cba9df8ee687fe91a53144ad3e55dbaa1c06c06aea16986d20e9261629cc&token=421314186&lang=zh_CN&scene=21#wechat_redirect)ã€[3è¡ŒPythonä»£ç è¯†åˆ«å›¾ç‰‡æ–‡å­—](https://mp.weixin.qq.com/s?__biz=MzI2MDY2NzQwMQ==&mid=2247494675&idx=1&sn=39d8d21ba38ff7074f3ed1d683b0763c&chksm=ea648d75dd130463fa17f06f63e4a3c7462e3619f741e883249af8f18144a3de52a4de9ab21a&token=421314186&lang=zh_CN&scene=21#wechat_redirect)ã€‚

ä¸è¿‡ä»Šå¤©æˆ‘ä»¬è¦æä¸€ä¸ªå‡çº§ç‰ˆï¼šç›´æ¥å†™ä¸€ä¸ª**å›¾åƒæ–‡å­—è¯†åˆ«OCRå·¥å…·**ï¼

å¼•è¨€
--

æœ€è¿‘åœ¨æŠ€æœ¯äº¤æµç¾¤é‡ŒèŠåˆ°ä¸€ä¸ªå…³äºå›¾åƒæ–‡å­—è¯†åˆ«çš„éœ€æ±‚ï¼Œåœ¨å·¥ä½œã€ç”Ÿæ´»ä¸­å¸¸å¸¸ä¼šç”¨åˆ°ï¼Œæ¯”å¦‚**ç¥¨æ®ã€æ¼«ç”»ã€æ‰«æä»¶ã€ç…§ç‰‡çš„æ–‡æœ¬æå–**ã€‚

åšä¸»åŸºäº PyQt + labelme + PaddleOCR å†™äº†ä¸€ä¸ªæ¡Œé¢ç«¯çš„OCRå·¥å…·ï¼Œç”¨äºå¿«é€Ÿå®ç°å›¾ç‰‡ä¸­**æ–‡æœ¬åŒºåŸŸè‡ªåŠ¨æ£€æµ‹+æ–‡æœ¬è‡ªåŠ¨è¯†åˆ«**ã€‚

è¯†åˆ«æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz_gif/P33BNFicia1AkYS8amPicgxTekyKazdupQd9ib5CsGtMhaICJCvPWQq4wFJcaBypS7icmnhsLfib4nsnL2CzMHmGjaCg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)â–²OCRå·¥å…·è¯†åˆ«æ•ˆæœ

æ‰€æœ‰æ¡†é€‰åŒºåŸŸä¸ºOCRç®—æ³•è‡ªåŠ¨æ£€æµ‹ï¼Œå³ä¾§åˆ—è¡¨æœ‰æ¯ä¸ªæ¡†å¯¹åº”çš„æ–‡å­—å†…å®¹ï¼›ç‚¹å‡»å³ä¾§â€œè¯†åˆ«ç»“æœâ€ä¸­çš„æ–‡æœ¬è®°å½•ï¼Œç„¶åç‚¹å‡»â€œå¤åˆ¶åˆ°å‰ªè´´æ¿â€å³å¯å¤åˆ¶è¯¥æ–‡æœ¬å†…å®¹ã€‚

åŠŸèƒ½åˆ—è¡¨
----

*   æ–‡æœ¬åŒºåŸŸæ£€æµ‹+æ–‡å­—è¯†åˆ«
    
*   æ–‡æœ¬åŒºåŸŸå¯è§†åŒ–
    
*   æ–‡å­—å†…å®¹åˆ—è¡¨
    
*   å›¾åƒã€æ–‡ä»¶å¤¹åŠ è½½
    
*   å›¾åƒæ»šè½®ç¼©æ”¾æŸ¥çœ‹
    
*   ç»˜åˆ¶åŒºåŸŸã€ç¼–è¾‘åŒºåŸŸ
    
*   å¤åˆ¶æ‰€é€‰æ–‡æœ¬è¯†åˆ«ç»“æœ
    

OCRéƒ¨åˆ†
-----

å›¾åƒæ–‡å­—æ£€æµ‹+æ–‡å­—è¯†åˆ«ç®—æ³•ï¼Œä¸»è¦å€ŸåŠ© `paddleocr` å®ç°ã€‚

åˆ›å»ºæˆ–è€…é€‰æ‹©ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…éœ€è¦ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ã€‚

```
condaÂ createÂ -nÂ ocr  
condaÂ activateÂ ocr  

```

### å®‰è£…æ¡†æ¶

å¦‚æœä½ æ²¡æœ‰NVIDIA GPUï¼Œæˆ–GPUä¸æ”¯æŒCUDAï¼Œå¯ä»¥å®‰è£…CPUç‰ˆæœ¬ï¼š

```
#Â CPUç‰ˆæœ¬  
pipÂ installÂ paddlepaddle==2.1.0Â -iÂ https://mirror.baidu.com/pypi/simple 
```

å¦‚æœä½ çš„GPUå®‰è£…è¿‡CUDA9æˆ–CUDA10ï¼ŒcuDNN 7.6+ï¼Œå¯ä»¥é€‰æ‹©ä¸‹é¢è¿™ä¸ªGPUç‰ˆæœ¬ï¼š

```
#Â GPUç‰ˆæœ¬  
python3Â -mÂ pipÂ installÂ paddlepaddle-gpu==2.1.0Â -iÂ https://mirror.baidu.com/pypi/simple  

```

### å®‰è£… PaddleOCR

å®‰è£…paddleocrï¼š

```
pipÂ installÂ "paddleocr>=2.0.1"Â #Â æ¨èä½¿ç”¨2.0.1+ç‰ˆæœ¬  

```

ç‰ˆé¢åˆ†æï¼Œéœ€è¦å®‰è£… Layout-Parserï¼š

```
pip3Â installÂ -UÂ https://paddleocr.bj.bcebos.com/whl/layoutparser-0.0.0-py3-none-any.whl  

```

### æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ

å®‰è£…å®Œæˆåï¼Œæµ‹è¯•ä¸€å¼ å›¾ç‰‡`--image_dir ./imgs/11.jpg`ï¼Œé‡‡ç”¨ä¸­è‹±æ–‡æ£€æµ‹+æ–¹å‘åˆ†ç±»å™¨+è¯†åˆ«å…¨æµç¨‹ï¼š

```
paddleocrÂ --image_dirÂ ./imgs/11.jpgÂ --use_angle_clsÂ trueÂ --use_gpuÂ false  

```

è¾“å‡ºä¸€ä¸ªlistï¼š

![å›¾ç‰‡](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

### åœ¨pythonä¸­è°ƒç”¨

```
fromÂ paddleocrÂ importÂ PaddleOCR,Â draw_ocr  
  
#Â Paddleocrç›®å‰æ”¯æŒçš„å¤šè¯­è¨€è¯­ç§å¯ä»¥é€šè¿‡ä¿®æ”¹langå‚æ•°è¿›è¡Œåˆ‡æ¢  
#Â ä¾‹å¦‚`ch`,Â `en`,Â `fr`,Â `german`,Â `korean`,Â `japan`  
ocrÂ =Â PaddleOCR(use_angle_cls=True,Â lang="ch")Â Â #Â needÂ toÂ runÂ onlyÂ onceÂ toÂ downloadÂ andÂ loadÂ modelÂ intoÂ memory  
img_pathÂ =Â './imgs/11.jpg'  
resultÂ =Â ocr.ocr(img_path,Â cls=True)  
forÂ lineÂ inÂ result:  
Â Â Â Â print(line)  

```

è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªlistï¼Œæ¯ä¸ªitemåŒ…å«äº†æ–‡æœ¬æ¡†ï¼Œæ–‡å­—å’Œè¯†åˆ«ç½®ä¿¡åº¦ï¼š

> [[[24.0, 36.0], [304.0, 34.0], [304.0, 72.0], [24.0, 74.0]], ['çº¯è‡»è¥å…»æŠ¤å‘ç´ ', 0.964739]] [[[24.0, 80.0], [172.0, 80.0], [172.0, 104.0], [24.0, 104.0]], ['äº§å“ä¿¡æ¯/å‚æ•°', 0.98069626]] [[[24.0, 109.0], [333.0, 109.0], [333.0, 136.0], [24.0, 136.0]], ['ï¼ˆ45å…ƒ/æ¯å…¬æ–¤ï¼Œ100å…¬æ–¤èµ·è®¢ï¼‰', 0.9676722]] ......

ç•Œé¢éƒ¨åˆ†
----

ç•Œé¢éƒ¨åˆ†åŸºäºpyqt5å®ç°ï¼Œå…¶ä¸­pyqt GUIç¨‹åºå¼€å‘å…¥é—¨å’Œç¯å¢ƒé…ç½®ï¼Œè¯¦è§ä¸€ç¯‡åšå®¢(å…·ä½“è§æ–‡æœ«)ã€‚

ä¸»è¦æ­¥éª¤ï¼š

### ç•Œé¢å¸ƒå±€è®¾è®¡

åœ¨QtDesignerä¸­æ‹–æ‹½æ§ä»¶ï¼Œå®Œæˆç¨‹åºç•Œé¢å¸ƒå±€ï¼Œå¹¶ä¿å­˜`*.ui`æ–‡ä»¶ã€‚

![å›¾ç‰‡](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

### åˆ©ç”¨ pyuic è‡ªåŠ¨ç”Ÿæˆç•Œé¢ä»£ç 

åœ¨ pycharm çš„é¡¹ç›®æ–‡ä»¶ç»“æ„ä¸­æ‰¾åˆ°`*.ui`æ–‡ä»¶ï¼Œå³é”®â€”â€”External Toolsâ€”â€”pyuicï¼Œä¼šåœ¨uiæ–‡ä»¶åŒçº§ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆç•Œé¢ ui çš„ Python ä»£ç ã€‚

![å›¾ç‰‡](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

### ç¼–å†™ç•Œé¢ä¸šåŠ¡ç±»

ä¸šåŠ¡ç±» MainWindow å®ç°ç¨‹åºé€»è¾‘å’Œç®—æ³•åŠŸèƒ½ï¼Œä¸å‰é¢ç¬¬2æ­¥ç”Ÿæˆçš„uiå®ç°è§£è€¦ï¼Œé¿å…æ¯æ¬¡ä¿®æ”¹uiæ–‡ä»¶ä¼šå½±å“ä¸šåŠ¡ä»£ç ã€‚uiç•Œé¢ä¸Šçš„æ§ä»¶å¯ä»¥é€šè¿‡`self._ui.xxxObjectName` è®¿é—®ã€‚

```
classÂ MainWindow(QMainWindow):  
Â FIT_WINDOW,Â FIT_WIDTH,Â MANUAL_ZOOMÂ =Â 0,Â 1,Â 2  
  
Â defÂ __init__(self):  
Â Â super().__init__()Â Â #Â è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œåˆ›å»ºQWidgetçª—ä½“  
Â Â self._uiÂ =Â Ui_MainWindow()Â Â #Â åˆ›å»ºuiå¯¹è±¡  
Â Â self._ui.setupUi(self)Â Â #Â æ„é€ ui  
Â Â self.setWindowTitle(__appname__)  
  
Â Â #Â åŠ è½½é»˜è®¤é…ç½®  
Â Â configÂ =Â get_config()  
Â Â self._configÂ =Â configÂ Â Â Â   
Â Â   
Â Â #Â å•é€‰æŒ‰é’®ç»„  
Â Â Â Â Â Â Â Â self.checkBtnGroupÂ =Â QButtonGroup(self)  
Â Â Â Â Â Â Â Â self.checkBtnGroup.addButton(self._ui.checkBox_ocr)  
Â Â Â Â Â Â Â Â self.checkBtnGroup.addButton(self._ui.checkBox_det)  
Â Â Â Â Â Â Â Â self.checkBtnGroup.addButton(self._ui.checkBox_recog)  
Â Â Â Â Â Â Â Â self.checkBtnGroup.addButton(self._ui.checkBox_layoutparser)  
Â Â Â Â Â Â Â Â self.checkBtnGroup.setExclusive(True) 
```

### å®ç°ç•Œé¢ä¸šåŠ¡é€»è¾‘

å¯¹ä¸»ç•Œé¢ä¸Šçš„æŒ‰é’®ã€åˆ—è¡¨ã€ç»˜å›¾æ§ä»¶è¿›è¡Œ**ä¿¡å·æ§½è¿æ¥**ã€‚è‡ªå®šä¹‰çš„æ§½å‡½æ•°ä¸ç”¨ä¸“é—¨å£°æ˜ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ä¿¡å·ï¼Œéœ€è¦åœ¨ç±»__init__()å‰åŠ ä¸Š `yourSignal= pyqtSignal(args)`ã€‚

è¿™é‡Œä»¥æŒ‰é’®å“åº”å‡½æ•°ã€åˆ—è¡¨å“åº”å‡½æ•°ä¸ºä¾‹ã€‚æŒ‰é’®ç‚¹å‡»çš„ä¿¡å·æ˜¯ `clicked`ï¼ŒlistWidgetåˆ—è¡¨åˆ‡æ¢é€‰æ‹©çš„ä¿¡å·æ˜¯ `itemSelectionChanged` ã€‚

```
#Â æŒ‰é’®å“åº”å‡½æ•°  
self._ui.btnOpenImg.clicked.connect(self.openFile)  
self._ui.btnOpenDir.clicked.connect(self.openDirDialog)  
self._ui.btnNext.clicked.connect(self.openNextImg)  
self._ui.btnPrev.clicked.connect(self.openPrevImg)  
self._ui.btnStartProcess.clicked.connect(self.startProcess)  
self._ui.btnCopyAll.clicked.connect(self.copyToClipboard)  
self._ui.btnSaveAll.clicked.connect(self.saveToFile)  
self._ui.listWidgetResults.itemSelectionChanged.connect(self.onItemResultClicked)  

```

### 5. è¿è¡Œçœ‹çœ‹æ•ˆæœ

è¿è¡Œ `python main.py` å³å¯å¯åŠ¨GUIç¨‹åºã€‚

æ‰“å¼€å›¾ç‰‡â†’é€‰æ‹©è¯­è¨€æ¨¡å‹chï¼ˆä¸­æ–‡ï¼‰â†’é€‰æ‹©æ–‡æœ¬æ£€æµ‹+è¯†åˆ«â†’ç‚¹å‡»å¼€å§‹ï¼Œæ£€æµ‹å®Œçš„æ–‡æœ¬åŒºåŸŸä¼šè‡ªåŠ¨ç”»æ¡†ï¼Œå¹¶åœ¨å³ä¾§è¯†åˆ«ç»“æœâ€”â€”æ–‡æœ¬Tabé¡µçš„åˆ—è¡¨ä¸­æ˜¾ç¤ºã€‚

![å›¾ç‰‡](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

æ‰€æœ‰æ£€æµ‹å‡ºæ–‡æœ¬çš„åŒºåŸŸåˆ—è¡¨ï¼Œåœ¨è¯†åˆ«ç»“æœâ€”â€”åŒºåŸŸTabé¡µï¼š

![å›¾ç‰‡](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

è½¯ä»¶ä»£ç 
----

ç”±äºæ—¶é—´æœ‰é™ï¼Œè½¯ä»¶ç»†èŠ‚åŠŸèƒ½è¿˜éœ€è¿›ä¸€æ­¥å®Œå–„ã€‚ä»£ç å·²å¼€æºåˆ° gitee ä¸Šï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„æœ‹å‹æpull requestï¼Œå…±åŒä¿®æ”¹å®Œå–„ã€‚

ä»£ç å¼€æºåœ°å€ï¼š_https://gitee.com/signal926/ocr-gui-demo_

å‚è€ƒé“¾æ¥
----

ç”»æ¡†ã€åŒºåŸŸåˆ—è¡¨ï¼š_https://github.com/wkentaro/labelme_

iconsï¼š_https://github.com/google/material-design-icons_

_https://gitee.com/paddlepaddle/PaddleOCR/blob/release/2.3/doc/doc_ch/quickstart.md_

_https://blog.csdn.net/Bit_Coders/article/details/119304488_

--- EOF ---  

  

**æ¨èâ†“â†“â†“**

 ![](http://mmbiz.qpic.cn/mmbiz_png/n9vSKDrwqn1jYjDr12k70sWjrXt1RNyibPOiawH02FLgUQ02JJtYpWCMXpftrbDgHxnTTEM9pZcB6ic8RpWOKlPug/0?wx_fmt=png) ** æ•°æ®åˆ†æä¸“æ  ** åˆ†äº«æ•°æ®åˆ†æç›¸å…³æŠ€æœ¯æ–‡ç« ã€æ•™ç¨‹ã€å·¥å…·ï¼ŒåŒ…æ‹¬ä½†ä¸é™åˆ¶äºRã€Pythonã€Sparkã€MySQLã€Excelç­‰åœ¨æ•°æ®åˆ†æã€æ•°æ®æŒ–æ˜ã€æ•°æ®æŠ“å–ã€æ•°æ®å¯è§†åŒ–ç­‰æ–¹é¢çš„æŠ€æœ¯æ–‡ç« åˆ†äº«ã€‚ 0ç¯‡åŸåˆ›å†…å®¹   å…¬ä¼—å·